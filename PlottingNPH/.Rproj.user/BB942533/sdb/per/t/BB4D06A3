{
    "contents" : "library(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\n\n#load all the .csv files in the data folder, then add a column naming the neuron, \n#using the file name as the default name, then put them all together in one long data frame\npath<-\"~/GitHub/NPH-Analysis/data/\"\nfiles <- list.files(path=path,pattern='*.csv')\nt<-data.frame()\nfor (i in 1:length(files)) {\n  temp <- read.csv(paste(path,files[i],sep=''))\n  temp$neuron<-gsub('.csv','',files[i])\n  t <-rbind(t,temp)\n}\n\nthresh=1.5 #points with velocity below threshold are considered fixation\n\n#choose just the points of fixation, then bin the data into 1 degree bins (using round)\n#and calculate the mean firing rate during all the times when the eye is at each position\nt %>%\n  filter(abs(rev)<thresh,abs(revV)<thresh,abs(lev)<thresh,abs(levV)<thresh) %>%\n  mutate(R.Hep=round(rep),R.Vep=round(repV), L.Hep=round(lep),L.Vep=round(lepV)) %>%\n  group_by(R.Hep,R.Vep,L.Hep,L.Vep,neuron) %>%\n  summarize(fr=mean(sdf)) %>%\n  ungroup(.) %>%\n  #use tidyr functions to make columns for eye (left or right), vertrical and horizontal eye position\n  mutate(time=row_number(fr)) %>%\n  gather(temp,P,1:4) %>%\n  separate(temp,c(\"Eye\",\"HV\")) %>%\n  spread(HV,P) ->\n  s\nlevels(s$Eye)<-c(\"Right Eye\",\"Left Eye\") #Change R/L into Right Eye/Left Eye\n\n#Just show cells I want\ns <- filter(s,neuron %in% c(\"Bee6\",\"BeeX1\",\"BeeX2\",\"BeeX3a\",\"BeeX3b\",\"BeeY1\"))\n\n\n#Create a scaled firing rate by simply dividing by the maximum firing rate in any bin\ns %>%\n  group_by(neuron) %>%\n  mutate(maxFR=max(fr),scaledFR=fr/maxFR) ->\n  ss\n\n#plot\nqplot(Hep,Vep,data=ss,fill=scaledFR)+geom_tile()+facet_grid(neuron~Eye)+\n  scale_fill_gradient(low='black',high='orange')\n\n\n  ",
    "created" : 1443222711153.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4290905551",
    "id" : "BB4D06A3",
    "lastKnownWriteTime" : 1443652120,
    "path" : "~/GitHub/NPH-Analysis/PlottingNPH/multiplotscript2.R",
    "project_path" : "multiplotscript2.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "type" : "r_source"
}